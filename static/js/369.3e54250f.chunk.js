"use strict";(self.webpackChunkdelivery_front_end=self.webpackChunkdelivery_front_end||[]).push([[369],{6713:function(e,r,n){n.d(r,{LV:function(){return d},YM:function(){return o},eR:function(){return l},hW:function(){return i},jv:function(){return u},xJ:function(){return c}});var t=n(4165),a=n(531),s=n(1243);s.Z.defaults.baseURL="https://delivery-5pcr.onrender.com/api";var i=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("/restaurants/mc-don");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("/restaurants/kfc");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("/restaurants/sushi");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("/restaurants/uk-cuisine");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("/restaurants/pizza");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post("/orders",r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},5369:function(e,r,n){n.r(r),n.d(r,{default:function(){return re}});var t=n(4165),a=n(1413),s=n(531),i=n(9439),u=n(2791),c=n(8007),o=n(9434),l=n(1134),d=n(4695),p=n(1836),f=n(4087),h=n(5232),x=n(1148),m=n(9229),v=n(311),j=n(2322),g=n(2435),Z=n(1900),b=n(2732),k=n(6574),w=n(553),y=n(8500),z=n(3129),I=n(4004),A=n(182),C=n(1660),S=n(2894),R=n(7748),T=n(2893),q=n(3107),F=n(184);function _(e){var r=e.count,n=e.id,t=(0,o.I0)(),s=(0,R.M)({step:1,defaultValue:r,min:1,max:20}),i=s.getInputProps,u=s.getIncrementButtonProps,c=s.getDecrementButtonProps,l=u(),d=c(),p=i();return(0,F.jsxs)(T.U,{maxW:"160px",textAlign:"center",children:[(0,F.jsx)(g.z,(0,a.Z)((0,a.Z)({},l),{},{onClick:function(){return t((0,q.xl)(n))},children:"+"})),(0,F.jsx)(x.I,(0,a.Z)({},p)),(0,F.jsx)(g.z,(0,a.Z)((0,a.Z)({},d),{},{onClick:function(){return t((0,q.IT)(n))},children:"-"}))]})}var L,P=n(168),M=n(6088),V=n(828),$=(0,M.Z)(V._51)(L||(L=(0,P.Z)(["\n  color: #f7c200;\n  cursor: pointer;\n  &:hover,\n  &:focus {\n    color: #db0038;\n  }\n"])));function B(){var e=(0,o.I0)(),r=(0,o.v9)(S.R);return(0,F.jsx)(f.xu,{children:r.length>0?(0,F.jsx)(Z.x,{children:(0,F.jsxs)(b.i,{variant:"simple",children:[(0,F.jsxs)(k.R,{children:["Total sum: $",r.reduce((function(e,r){return e+r.price*r.count}),0)]}),(0,F.jsx)(w.h,{}),(0,F.jsx)(y.p,{children:r&&r.map((function(r){var n=r.name,t=r.id,a=r.price,s=r.count,i=r.image;return(0,F.jsxs)(z.Tr,{children:[(0,F.jsx)(I.Td,{children:(0,F.jsx)(A.E,{borderRadius:"4",src:i,width:"60px",height:"60px",objectFit:"cover"})}),(0,F.jsx)(I.Td,{children:n}),(0,F.jsxs)(I.Td,{children:["$",a]}),(0,F.jsx)(I.Td,{children:(0,F.jsx)(_,{count:s,id:t})}),(0,F.jsxs)(I.Td,{isNumeric:!0,children:["$",a*s]}),(0,F.jsx)(I.Td,{children:(0,F.jsx)($,{onClick:function(){return e((0,q.Ir)(t))}})})]},t)}))}),(0,F.jsx)(C.$,{})]})}):(0,F.jsx)(m.x,{fontSize:"lg",textAlign:"center",fontWeight:"500",color:"#519dd9",children:"There are no products in your cart. Add something tasty to make an order!"})})}var E=n(1267),K=E.Ry({name:E.Z_().required("Required field").matches(/^(?=.{2,30}$)[a-zA-Z]+(?:[-'\s][a-zA-Z]+)*$/,"Invalid name format"),email:E.Z_().required("Required field").email("Invalid email format"),phone:E.Z_().required("Required field").matches(/^[0-9]+$/,"Invalid number format").min(10,"Phone must be at least 10 characters").max(12,"Phone should be at most 12 characters"),address:E.Z_().required("Required field").min(10,"Address must be at least 10 characters")}).required(),U=n(6713),W=function(e){return e.user.user},G=n(5821),O=n(7689);function D(){var e=(0,O.s0)(),r=(0,o.I0)(),n=(0,o.v9)(S.R),Z=(0,o.v9)(W),b=(0,u.useRef)(),k=(0,u.useState)(!1),w=(0,i.Z)(k,2),y=w[0],z=w[1],I=(0,p.p)(),A=(0,l.cI)({mode:"all",resolver:(0,d.X)(K)}),C=A.register,R=A.handleSubmit,T=A.formState.errors,_=A.setValue;(0,u.useEffect)((function(){_("name",Z.name),_("email",Z.email),_("phone",Z.phone),_("address",Z.address)}),[Z,_]);var L=function(){var i=(0,s.Z)((0,t.Z)().mark((function s(i){var u;return(0,t.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(u=b.current.getValue())){t.next=13;break}return z(!0),t.next=6,r((0,G.cn)((0,a.Z)({},i)));case 6:return t.next=8,(0,U.LV)((0,a.Z)((0,a.Z)({},i),{},{order:n,token:u}));case 8:return r((0,q.LL)()),e("/"),t.abrupt("return",I({position:"top-center",render:function(){return(0,F.jsx)(f.xu,{color:"white",p:3,bg:"#519dd9",children:"Got it! Our manager will call you within 10 minutes!"})}}));case 13:return t.abrupt("return",I({position:"top-center",render:function(){return(0,F.jsx)(f.xu,{color:"white",p:3,bg:"#519dd9",children:"Please, let us know that you are not a robot, check the captcha before make an order!"})}}));case 14:t.next=19;break;case 16:return t.prev=16,t.t0=t.catch(0),t.abrupt("return",I({position:"top-center",render:function(){return(0,F.jsx)(f.xu,{color:"white",p:3,bg:"#db0038",children:t.t0.message})}}));case 19:return t.prev=19,z(!1),t.finish(19);case 22:case"end":return t.stop()}}),s,null,[[0,16,19,22]])})));return function(e){return i.apply(this,arguments)}}();return(0,F.jsx)("section",{children:(0,F.jsxs)("form",{onSubmit:R(L),children:[(0,F.jsxs)(h.K,{spacing:4,mb:8,mt:8,children:[(0,F.jsx)(x.I,(0,a.Z)({placeholder:"Name",size:"md"},C("name"))),T.name&&(0,F.jsx)(m.x,{color:"#db0038",fontSize:"sm",children:T.name.message}),(0,F.jsx)(x.I,(0,a.Z)({placeholder:"Email",size:"md",type:"email"},C("email"))),T.email&&(0,F.jsx)(m.x,{color:"#db0038",fontSize:"sm",children:T.email.message}),(0,F.jsxs)(v.B,{size:"md",children:[(0,F.jsx)(j.Ui,{children:"+38"}),(0,F.jsx)(x.I,(0,a.Z)({type:"tel",placeholder:"Phone number"},C("phone")))]}),T.phone&&(0,F.jsx)(m.x,{color:"#db0038",fontSize:"sm",children:T.phone.message}),(0,F.jsx)(x.I,(0,a.Z)({placeholder:"Address",size:"md"},C("address"))),T.address&&(0,F.jsx)(m.x,{color:"#db0038",fontSize:"sm",children:T.address.message})]}),(0,F.jsx)(B,{}),n.length>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(c.Z,{sitekey:"6Ld_BjwmAAAAAMu4Ue88XfFNTivPttevGf34TC1F",ref:b}),(0,F.jsx)(g.z,{colorScheme:"blue",type:"submit",ml:"auto",display:"block",isLoading:y,children:"Make an order"})]})]})})}var N=n(7993),X=n(4869),H=n.n(X),J={"McDonald's":{lat:50.45133455590493,lng:30.52154065231919},KFC:{lat:50.4518845094562,lng:30.52582146017646},pizza:{lat:50.45202113583062,lng:30.523879541076965},Sushi:{lat:50.44930902848304,lng:30.530387883859117},"Ukrainian cuisine":{lat:50.449076750097596,lng:30.522191054069}},Y={width:"100%",height:"400px"};function Q(){var e=(0,o.I0)(),r=(0,o.v9)(S.S),n=(0,p.p)(),t=(0,u.useState)(null),a=(0,i.Z)(t,2),s=a[0],c=a[1],l=(0,u.useState)(0),d=(0,i.Z)(l,2),h=d[0],x=d[1],m=(0,N.Db)({googleMapsApiKey:"AIzaSyCexBqcsVlaa-7GKg7b01BAzdEyV8R9cd0"}).isLoaded,v=(0,u.useCallback)((function(){return n({position:"top-center",render:function(){return(0,F.jsxs)(f.xu,{color:"white",p:3,bg:"#53bac1",children:["Approximate delivery time is"," ",(h.toFixed(2)/50*600).toFixed(0)," min"]})}})}),[h,n]);(0,u.useEffect)((function(){h&&v()}),[v,h]);var j=(0,u.useMemo)((function(){return{lat:50.45,lng:30.523}}),[]),g=J[r],Z=[g,s],b=(0,u.useCallback)((function(n){var t=n.latLng;if(c({lat:t.lat(),lng:t.lng()}),(new window.google.maps.Geocoder).geocode({location:t},(function(r,n){"OK"===n&&r[0]&&e((0,G.qj)(r[0].formatted_address))})),r){var a=H()(g,{latitude:t.lat(),longitude:t.lng()});x(a/1e3)}}),[e,g,r]);if(!m)return(0,F.jsx)("h1",{children:"Loading..."});return(0,F.jsx)("div",{children:(0,F.jsxs)(N.b6,{mapContainerStyle:Y,center:j,zoom:12,onClick:b,children:[s&&(0,F.jsx)(N.jC,{position:s}),r&&(0,F.jsx)(N.jC,{position:g,label:r}),r&&s&&(0,F.jsx)(N.aH,{path:Z,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:3e4,zIndex:1}})]})})}var ee=n(4459);function re(){return(0,F.jsx)("main",{children:(0,F.jsxs)(ee.W,{children:[(0,F.jsx)(Q,{}),(0,F.jsx)(D,{})]})})}}}]);
//# sourceMappingURL=369.3e54250f.chunk.js.map